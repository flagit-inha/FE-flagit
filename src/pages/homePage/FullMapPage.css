@import url('https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap');

/* ===== Root Variables ===== */
:root {
  /* Layout */
  --nav-height: 70px;
  --fab-offset: 14px;
  --actions-side-pad: 20px;
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /* Map */
  --map-w: 3;
  --map-h: 5.2;
  --map-top-offset: 60px;
  --jeju-bottom: 10%;
  --dokdo-top: 25%;

  /* Logo / Title position */
  --logo-shift-x: -12px;
  --logo-shift-y: -10px;
  --logo-scale: 1;
  --title-shift-x: -12px;
  --title-shift-y: 25px;
  --title-max-width: 56%;

  /* Typography */
  --title-fs-base: clamp(20px, 6vw, 32px);
  --title-line-gap: 2px;
  --title-letter-spacing: -0.5px;
  --body-fs: 14px;
  --body-letter-spacing: -0.2px;
  --nav-label-fs: 11px;
  --nav-letter-spacing: -0.15px;

  /* Footer (flag stat) */
  --footer-flag-fs: 14px;
  --footer-flag-weight: 600;
  --footer-flag-letter: -0.3px;
  --footer-flag-icon-size: 40px;
  --footer-flag-gap: 6px;

  /* FAB */
  --fab-size: 64px;
  --fab-icon-size: 50px;

  /* Bottom Nav */
  --bottom-nav-bg:#e9e9e9;
  --bottom-nav-icon-size:26px;
  --bottom-nav-label-active:#111;          /* (현재 사용 안 하지만 보존) */
  --bottom-nav-label-inactive:#333;
}

/* ===== Global ===== */
html { -webkit-text-size-adjust:100%; text-size-adjust:100%; }
html, body {
  margin:0; padding:0; width:100%; height:100%;
  font-family:system-ui, sans-serif; background:#e5e8ea;
}

/* ===== Layout Containers ===== */
.fullmap-container {
  display:flex; flex-direction:column; align-items:center;
  width:100%; max-width:430px; min-height:100dvh;
  background:#ecf5ee; margin:0 auto; overflow:hidden;
  position:relative; box-shadow:0 8px 24px rgba(0,0,0,.12);
  border-radius:40px;
}
.fullmap-content {
  flex:1; width:100%; padding:20px 20px 0; box-sizing:border-box;
  position:relative; display:flex; flex-direction:column;
}
.fullmap-header { display:none; }

/* ===== Top Bar ===== */
.top-bar {
  position:fixed; top:calc(env(safe-area-inset-top,0px) + 12px);
  left:50%; transform:translateX(-50%);
  width:100%; max-width:430px; padding:0 20px;
  display:flex; justify-content:space-between; align-items:flex-start;
  z-index:60; pointer-events:none; box-sizing:border-box;
}
.app-logo {
  width:clamp(90px,32vw,140px); height:auto;
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.25)) drop-shadow(0 4px 8px rgba(0,0,0,.18));
  transform:translate(var(--logo-shift-x), var(--logo-shift-y)) scale(var(--logo-scale));
  transform-origin:left top; display:block; pointer-events:auto;
  user-select:none; -webkit-user-drag:none;
}
.top-title {
  font-family:'Inter',system-ui,sans-serif; font-weight:600;
  font-size:var(--title-fs-base); line-height:1.06;
  letter-spacing:var(--title-letter-spacing);
  display:flex; flex-direction:column; align-items:flex-end;
  gap:var(--title-line-gap); margin:0; padding:0;
  max-width:var(--title-max-width); text-align:right; color:#222;
  word-break:keep-all;
  transform:translate(var(--title-shift-x), var(--title-shift-y));
  transform-origin:right top;
}
.top-title .title-line1,
.top-title .title-line2 { display:block; }

/* ===== Map Area ===== */
.map-area {
  position:relative; width:100%; margin-top:var(--map-top-offset);
  aspect-ratio:var(--map-w) / var(--map-h);
  border-radius:24px; overflow:hidden; background:transparent;
  display:flex; flex-direction:column;
}
.geo-wrapper, .geo-canvas { position:relative; width:100%; height:100%; }
.geo-main {
  position:absolute; top:0; left:-5%; width:100%; height:100%;
  object-fit:contain; pointer-events:none; user-select:none;
}
.geo-dokdo {
  position:absolute; top:var(--dokdo-top); right:2%; width:14%;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.18));
  pointer-events:none; transition:top .25s ease;
}
.geo-jeju {
  position:absolute; bottom:var(--jeju-bottom); left:35%; width:30%;
  transform:translateX(-50%);
  filter:drop-shadow(0 3px 6px rgba(0,0,0,.15));
  pointer-events:none; transition:bottom .25s ease;
}

/* ===== Clouds ===== */
.cloud {
  position:absolute; width:clamp(60px,20vw,110px); height:auto;
  opacity:.9; filter:drop-shadow(0 3px 6px rgba(0,0,0,.12));
  animation:float 12s ease-in-out infinite; pointer-events:none; z-index:2;
}
.cloud-top { top:10%; left:65%; }
.cloud-middle { top:55%; left:0%; }
.cloud-bottom { top:75%; left:75%; }
@keyframes float { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-8px); } }

/* ===== Footer (Flag Stat + FAB) ===== */
.map-footer {
  position:fixed; left:50%; transform:translateX(-50%);
  bottom:calc(var(--nav-height) + var(--safe-bottom) + var(--fab-offset));
  width:100%; max-width:430px; padding:0 var(--actions-side-pad);
  display:flex; align-items:center; justify-content:space-between;
  z-index:30; pointer-events:none; box-sizing:border-box;
}
.footer-flag {
  display:flex; flex-direction:column; align-items:center;
  justify-content:center; gap:var(--footer-flag-gap); pointer-events:auto;
}
.footer-flag-icon {
  width:var(--footer-flag-icon-size) !important;
  height:var(--footer-flag-icon-size) !important;
  object-fit:contain; user-select:none; -webkit-user-drag:none;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.18));
}
.footer-flag-text {
  font-family:'Inter',system-ui,sans-serif;
  font-size:var(--footer-flag-fs) !important;
  font-weight:var(--footer-flag-weight) !important;
  letter-spacing:var(--footer-flag-letter) !important;
  line-height:1.1; color:#1d1d1f; text-align:center;
}
.footer-text { display:none; }

.add-button {
  pointer-events:auto; width:var(--fab-size); height:var(--fab-size);
  border:none; border-radius:50%; background:transparent;
  color:#fff; font-size:0 !important; line-height:0 !important;
  font-weight:600; display:flex; align-items:center; justify-content:center;
  cursor:pointer; transition:transform .18s ease;
  box-shadow:none; padding:0;
}
.add-button:active { transform:scale(.9); }
.add-button::before, .add-button::after { content:none !important; }
.add-button-icon {
  width:var(--fab-icon-size); height:var(--fab-icon-size);
  object-fit:contain; pointer-events:none; user-select:none; -webkit-user-drag:none;
}

/* ===== Bottom Navigation (Exact #B5B5B5, no active highlight) ===== */
.bottom-nav {
  position:fixed; bottom:0; left:50%; transform:translateX(-50%);
  width:100%; max-width:430px; height:var(--nav-height);
  display:flex; align-items:center; justify-content:space-between;
  gap:4px; padding:0 12px calc(var(--safe-bottom) + 4px);
  background:var(--bottom-nav-bg);
  box-shadow:0 -2px 8px rgba(0,0,0,.18);
  backdrop-filter:none; -webkit-backdrop-filter:none;
  border-top-left-radius:0; border-top-right-radius:0;
  z-index:50; pointer-events:auto;
}
.bottom-nav::before { content:none !important; }

.bottom-nav .nav-item {
  flex:1; height:100%;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px; font-family:'Inter',system-ui,sans-serif;
  font-size:var(--nav-label-fs); letter-spacing:var(--nav-letter-spacing);
  font-weight:500; color:var(--bottom-nav-label-inactive);
  position:relative; user-select:none; transition:color .25s;
}
.bottom-nav .nav-item img {
  width:var(--bottom-nav-icon-size); height:var(--bottom-nav-icon-size);
  object-fit:contain; opacity:.8; transition:opacity .25s, transform .25s;
  filter:drop-shadow(0 1px 2px rgba(0,0,0,.25));
}
/* active 상태 시 차이 제거 */
.bottom-nav .nav-item.active {
  color:var(--bottom-nav-label-inactive);
  font-weight:500;
}
.bottom-nav .nav-item.active img {
  opacity:.8;
  transform:none;
}
.bottom-nav .nav-item.active::after { content:none; }
.bottom-nav .nav-item:active img { transform:scale(.9); opacity:.65; }
.center-logo-slot { display:none !important; }

/* ===== Font Rendering ===== */
.top-title, .footer-flag-text, .nav-item {
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* ===== Responsive: Small Height ===== */
@media (max-height:700px) {
  :root {
    --map-h: 4.8;
    --map-top-offset:24px;
    --jeju-bottom:5%;
    --title-fs-base: clamp(19px, 5.6vw, 28px);
    --title-line-gap:1px;
  }
  .geo-jeju { --jeju-bottom:3%; }
  .geo-dokdo { top:26%; }
  .top-title { letter-spacing:-0.45px; }
}

/* ===== Responsive: Very Small Width ===== */
@media (max-width:360px) {
  :root {
    --fab-offset:10px;
    --bottom-nav-icon-size:24px;
  }
  .add-button { width:56px; height:56px; }
  .add-button-icon { width:30px; height:30px; }
  .geo-dokdo { width:13%; }
  .geo-jeju { width:28%; }
}

/* ===== Responsive: Tall Screens ===== */
@media (min-height:840px) {
  :root {
    --map-top-offset:70px;
    --jeju-bottom:5%;
    --title-line-gap:4px;
    --title-letter-spacing:-0.55px;
  }
  .top-title { letter-spacing:var(--title-letter-spacing); }
}